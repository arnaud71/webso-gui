"use strict";angular.module("websoApp",["ui.bootstrap","ngResource","ngSanitize","ngGrid"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"SolrCtrl"}).when("/organise",{templateUrl:"views/organise.html"}).when("/search",{templateUrl:"views/search.html",controller:"SolrCtrl"}).when("/signin",{templateUrl:"views/signin.html"}).when("/source/searchNew",{templateUrl:"views/source/searchNew.html",controller:"GoogleFeedCtrl"}).when("/source/list",{templateUrl:"views/source/list.html",controller:"SourceDataCtrl"}).when("/source/formAdd",{templateUrl:"views/source/formAdd.html"}).otherwise({redirectTo:"/"})}]),angular.module("websoApp").controller("SolrCtrl",["$scope","$resource",function(a,b){a.solr=b("http://albator.hesge.ch\\:8587/solr/collection1/:action",{action:"select",q:"pantene",wt:"json","json.wrf":"JSON_CALLBACK"},{get:{method:"JSONP"}}),a.doSearch=function(){a.searchTerm&&(a.solrResult=a.solr.get({q:a.searchTerm}))}}]),angular.module("websoApp").controller("GoogleFeedCtrl",["$scope","$resource",function(a,b){a.msgSelect="Select All",a.mySelections=[],a.foundRes=0,a.nameController="GoogleFeedCtrl",a.googleFeed=b("https://ajax.googleapis.com/ajax/services/feed/:action",{action:"find",v:"1.0",q:"technology",callback:"JSON_CALLBACK"},{get:{method:"JSONP"}}),a.gridOptions={data:"myData",selectedItems:a.mySelections,columnDefs:[{field:"url",displayName:"Source",cellTemplate:'<div class="ngCellText" ng-class="col.colIndex()"><a href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>'},{field:"title",displayName:"Title",cellTemplate:'<div class="ngCellText" ng-bind-html="row.getProperty(col.field)"></div>'},{field:"link",displayName:"From",cellTemplate:'<div class="ngCellText" ng-class="col.colIndex()"><a href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>'}]},a.doSearch=function(){a.searchTerm&&(a.googleFeedResult=a.googleFeed.get({q:a.searchTerm},function(){"undefined"==typeof a.googleFeedResult.responseData||(a.myData=a.googleFeedResult.responseData.entries,a.foundRes=a.googleFeedResult.responseData.entries.length)}))},a.selectAll=function(){angular.forEach(a.myData,function(b,c){a.gridOptions.selectItem(c,"Select All"===a.msgSelect)}),a.msgSelect="Select All"===a.msgSelect?"Deselect All":"Select All"},a.createOPML=function(){}}]),angular.module("websoApp").controller("SourceDataCtrl",["$scope","$resource",function(a,b){a.sourceData=b("http://albator.hesge.ch/cgi-bin/webso/sources/:action",{action:"get.json",sourceUser:"user_1",callback:"JSON_CALLBACK"},{get:{method:"JSONP"}}),a.doSearch=function(){a.sourceResult=a.sourceData.get()},a.doSearch()}]),angular.module("websoApp").controller("AddSourceCtrl",["$scope","$resource",function(a,b){a.inputType="rss",a.inputRefresh=1440,a.inputLevel=0,a.inputUser="user_1",a.sourceAdd=b("http://albator.hesge.ch/cgi-bin/webso/sources/:action",{action:"put.json",sourceUser:"user_1",sourceUrl:"",sourceType:"rss",sourceLevelSharing:"0",callback:"JSON_CALLBACK"},{get:{method:"JSONP"}}),a.doAdd=function(){a.sourceAddResult=a.sourceAdd.get({sourceUrl:a.inputUrl,sourceType:a.inputType,sourceUser:a.inputUser,sourceLevel:a.inputLevel})}}]);